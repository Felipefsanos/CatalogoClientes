<div class="content" fxLayout="column" fxLayoutAlign="center stretch">
	<div class="mat-elevation-z8">
		<table mat-table [dataSource]="dataSource" multiTemplateDataRows class="mat-elevation-z8">

			<ng-container matColumnDef="{{column}}" *ngFor="let column of columnsToDisplay; let i = index">
				<div [ngSwitch]="column">
					<ng-template [ngSwitchCase]="'acao'">
						<th mat-header-cell *matHeaderCellDef> Ação</th>
						<td mat-cell *matCellDef="let element">
							<button mat-button class="button-orange" type="button" [routerLink]="['/editar', element.id]">
								<i class="material-icons">create</i>
							</button>
							<button mat-button type="button" color="warn" (click)="delete(element)">
								<i class="material-icons">delete</i>
							</button>
							<button mat-button type="button" color="primary"
											(click)="expandedElement = expandedElement === element ? null : element">
								<i class="material-icons">remove_red_eye</i>
							</button>
						</td>
					</ng-template>
					<ng-template [ngSwitchCase]="'telefone'">
						<th mat-header-cell *matHeaderCellDef> {{displayedColumns[i]}} </th>
						<td mat-cell *matCellDef="let element"> {{element.telefones[0].numero | mask: '(00) 00000-0000'}} </td>
					</ng-template>
					<ng-template [ngSwitchCase]="'contato'">
						<th mat-header-cell *matHeaderCellDef> {{displayedColumns[i]}} </th>
						<td mat-cell *matCellDef="let element"> {{element.telefones[0].contato}} </td>
					</ng-template>
					<ng-template [ngSwitchCase]="'cnpj'">
						<th mat-header-cell *matHeaderCellDef> {{displayedColumns[i]}} </th>
						<td mat-cell *matCellDef="let element"> {{element[column] | mask: '00.000.000/0000-00'}} </td>
					</ng-template>
					<ng-template ngSwitchDefault>
						<th mat-header-cell *matHeaderCellDef> {{displayedColumns[i]}} </th>
						<td mat-cell *matCellDef="let element"> {{element[column]}} </td>
					</ng-template>
				</div>
			</ng-container>

			<!-- Expanded Content Column - The detail row is made up of this one column that spans across all columns -->
			<ng-container matColumnDef="expandedDetail">
				<td mat-cell *matCellDef="let element" [attr.colspan]="columnsToDisplay.length">
					<div class="example-element-detail" [@detailExpand]="element == expandedElement ? 'expanded' : 'collapsed'">
						<div class="example-element-diagram">
							<div class="example-element-position"> {{element.position}} </div>
							<div class="example-element-symbol"> {{element.symbol}} </div>
							<div class="example-element-name"> {{element.name}} </div>
							<div class="example-element-weight"> {{element.weight}} </div>
						</div>
						<div class="example-element-description">
							{{element.description}}
							<span class="example-element-description-attribution"> -- Wikipedia </span>
						</div>
					</div>
				</td>
			</ng-container>

			<tr mat-header-row *matHeaderRowDef="columnsToDisplay"></tr>
			<tr mat-row *matRowDef="let element; columns: columnsToDisplay;"
					class="example-element-row"
					[class.example-expanded-row]="expandedElement === element">
			</tr>
			<tr mat-row *matRowDef="let row; columns: ['expandedDetail']" class="example-detail-row"></tr>
		</table>
		<mat-paginator [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons></mat-paginator>
	</div>
	<div fxLayout="column" dir="rtl" fxLayoutAlign="center" class="fab-container">
		<button mat-fab color="primary" [routerLink]="'/cadastro'">
			<i class="material-icons">add</i>
		</button>
	</div>
</div>
